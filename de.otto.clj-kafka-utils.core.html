<!DOCTYPE html>
<html><head><meta charset="UTF-8"><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>de.otto.clj-kafka-utils.core documentation</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Clj-kafka-utils</span> <span class="project-version">1.0.0</span></span></a></h1></div><div class="sidebar primary"><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>de</span></div></div></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>otto</span></div></div></li><li class="depth-3"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>clj-kafka-utils</span></div></div></li><li class="depth-4"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>consumer</span></div></div></li><li class="depth-5"><a href="de.otto.clj-kafka-utils.consumer.medium.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>medium</span></div></a></li><li class="depth-4 current"><a href="de.otto.clj-kafka-utils.core.html"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>core</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="de.otto.clj-kafka-utils.core.html#var-determine-leaders"><div class="inner"><span>determine-leaders</span></div></a></li><li class="depth-1"><a href="de.otto.clj-kafka-utils.core.html#var-leader-consumers"><div class="inner"><span>leader-consumers</span></div></a></li><li class="depth-1"><a href="de.otto.clj-kafka-utils.core.html#var-partition-meta-data"><div class="inner"><span>partition-meta-data</span></div></a></li><li class="depth-1"><a href="de.otto.clj-kafka-utils.core.html#var-partition-offsets"><div class="inner"><span>partition-offsets</span></div></a></li><li class="depth-1"><a href="de.otto.clj-kafka-utils.core.html#var-simple-consumer"><div class="inner"><span>simple-consumer</span></div></a></li><li class="depth-1"><a href="de.otto.clj-kafka-utils.core.html#var-topic-meta-data"><div class="inner"><span>topic-meta-data</span></div></a></li><li class="depth-1"><a href="de.otto.clj-kafka-utils.core.html#var-topic-offsets"><div class="inner"><span>topic-offsets</span></div></a></li><li class="depth-1"><a href="de.otto.clj-kafka-utils.core.html#var-with-consumer"><div class="inner"><span>with-consumer</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">de.otto.clj-kafka-utils.core</h1><div class="doc"><div class="markdown"><p>Provides convenience functions for retrieving Kafka meta data.</p>
<p>Functions with a <code>source</code> argument either accept a <code>clj-kafka.consumer.simple/SimpleConsumer</code> instance or a Zookeeper connection map. In the latter case, a one-off simple consumer will be instantiated.</p></div></div><div class="public anchor" id="var-determine-leaders"><h3>determine-leaders</h3><div class="usage"><code>(determine-leaders source topic)</code></div><div class="doc"><div class="markdown"></div></div></div><div class="public anchor" id="var-leader-consumers"><h3>leader-consumers</h3><div class="usage"><code>(leader-consumers source topics)</code></div><div class="doc"><div class="markdown"><p>Returns a map of delayed SimpleConsumers for all leader brokers of the given <code>topics</code> to a seq of partitions they are leader for (as returned by <code>partition-meta-data</code>, enriched with the respective <code>:topic</code>).</p></div></div></div><div class="public anchor" id="var-partition-meta-data"><h3>partition-meta-data</h3><div class="usage"><code>(partition-meta-data source topic)</code></div><div class="doc"><div class="markdown"><p>Fetches partition meta data for the given <code>topic</code>.</p></div></div></div><div class="public anchor" id="var-partition-offsets"><h3>partition-offsets</h3><div class="usage"><code>(partition-offsets source topic partition)</code></div><div class="doc"><div class="markdown"></div></div></div><div class="public anchor" id="var-simple-consumer"><h3>simple-consumer</h3><div class="usage"><code>(simple-consumer broker client-id)</code></div><div class="doc"><div class="markdown"><p>Instantiates a SimpleConsumer from a given <code>broker</code> map with a <code>:host</code> and <code>:port</code> key.</p></div></div></div><div class="public anchor" id="var-topic-meta-data"><h3>topic-meta-data</h3><div class="usage"><code>(topic-meta-data source topic)</code></div><div class="doc"><div class="markdown"><p>Wraps <code>clj-kafka.consumer.simple/topic-meta-data</code> but only accepts a single <code>topic</code>.</p></div></div></div><div class="public anchor" id="var-topic-offsets"><h3>topic-offsets</h3><div class="usage"><code>(topic-offsets source topic)</code></div><div class="doc"><div class="markdown"><p>Returns a map of all partitions of the given <code>topic</code> to their respective earliest and latest offsets (as returned by <code>partition-offsets</code>.</p></div></div></div><div class="public anchor" id="var-with-consumer"><h3>with-consumer</h3><h4 class="type">macro</h4><div class="usage"><code>(with-consumer [consumer config] &amp; body)</code></div><div class="doc"><div class="markdown"><p>Binds <code>consumer</code> to a one-off SimpleConsumer instance connected to the first broker found via the given Zookeeper <code>config</code>.</p>
<p>TODO: Once <a href="https://github.com/pingles/clj-kafka/pull/73">https://github.com/pingles/clj-kafka/pull/73</a> is merged this needs to be switched to the broker with the ID returned from <code>zk/controller</code> instead of using the first one.</p></div></div></div></div></body></html>