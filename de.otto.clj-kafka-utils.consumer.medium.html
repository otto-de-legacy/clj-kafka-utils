<!DOCTYPE html>
<html><head><meta charset="UTF-8"><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>de.otto.clj-kafka-utils.consumer.medium documentation</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Clj-kafka-utils</span> <span class="project-version">1.0.0</span></span></a></h1></div><div class="sidebar primary"><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>de</span></div></div></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>otto</span></div></div></li><li class="depth-3"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>clj-kafka-utils</span></div></div></li><li class="depth-4"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>consumer</span></div></div></li><li class="depth-5 current"><a href="de.otto.clj-kafka-utils.consumer.medium.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>medium</span></div></a></li><li class="depth-4"><a href="de.otto.clj-kafka-utils.core.html"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>core</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="de.otto.clj-kafka-utils.consumer.medium.html#var-consumer"><div class="inner"><span>consumer</span></div></a></li><li class="depth-1"><a href="de.otto.clj-kafka-utils.consumer.medium.html#var-messages"><div class="inner"><span>messages</span></div></a></li><li class="depth-1"><a href="de.otto.clj-kafka-utils.consumer.medium.html#var-topic-offset"><div class="inner"><span>topic-offset</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">de.otto.clj-kafka-utils.consumer.medium</h1><div class="doc"><div class="markdown"><p>A medium-level consumer which&ndash;as the name suggests&ndash;is slightly higher level than the simple consumer but still lower level than the high-level consumer.</p>
<p>Compared to the simple consumer, the differences are:</p>
<ol>
  <li>It handles connection errors and leader changes</li>
  <li>The <a href="de.otto.clj-kafka-utils.consumer.medium.html#var-messages">messages</a> lazy-seq is open-ended, i.e. it spans across more than just a single chunk</li>
  <li>It is bound to a topic and partition at construction time</li>
</ol></div></div><div class="public anchor" id="var-consumer"><h3>consumer</h3><div class="usage"><code>(consumer config client-id topic partition fetch-size)</code><code>(consumer config client-id topic partition fetch-size fetch-retry-delay reconnect-delay)</code></div><div class="doc"><div class="markdown"><p>Returns a medium consumer.</p>
<p>Arguments:</p>
<dl>
  <dt>config</dt>
  <dd>Zookeeper connection map, e.g. {&ldquo;zookeeper.connect&rdquo; &ldquo;localhost:2821&rdquo;}</dd>
  <dt>client-id
  </dt>
  <dd>Client identifier</dd>
  <dt>topic</dt>
  <dd>Topic the consumer will be bound to</dd>
  <dt>partition</dt>
  <dd>Partition of the topic the consumer will be bound to</dd>
  <dt>fetch-size
  </dt>
  <dd>Size (in bytes) of message chunks to fetch when consuming via <code>messages</code></dd>
  <dt>fetch-retry-delay
  </dt>
  <dd>Delay (in ms) between fetch retries when end of partition was reached</dd>
  <dt>reconnect-delay
  </dt>
  <dd>Delay (in ms) between reconnect attempts in case of a connection error / leader change</dd>
</dl></div></div></div><div class="public anchor" id="var-messages"><h3>messages</h3><div class="usage"><code>(messages this start-offset)</code></div><div class="doc"><div class="markdown"><p>Returns a lazy-seq of messages from the consumer topic&rsquo;s partition starting at <code>start-offset</code> in the same format as <code>clj-kafka.consumer.simple/messages</code>. It is open-ended, i.e. it will fetch more than just one message chunk and will keep retrying to fetch more when reaching the end of the partition with a delay according to <code>fetch-retry-delay</code>.</p></div></div></div><div class="public anchor" id="var-topic-offset"><h3>topic-offset</h3><div class="usage"><code>(topic-offset this offset-position)</code></div><div class="doc"><div class="markdown"><p>Returns the offset at <code>offset-position</code> (either <code>:earliest</code> or <code>:latest</code>) for the consumer topic&rsquo;s partition.</p></div></div></div></div></body></html>